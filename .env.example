# ============================================
# IoT Platform - Environment Configuration
# ============================================
#
# Copy this file: cp .env.example .env
# Never commit .env to git
# ============================================

# Storage backend (memory | postgres)
# Dev: memory (fast, ephemeral) | Prod: postgres (persistent)
STORAGE_TYPE=memory

# Database
DB_HOST=localhost
DB_PORT=5432
DB_USER=iot_user
DB_PASSWORD=iot_password
DB_NAME=iot_platform
DB_SSLMODE=disable  # Dev: disable | Prod: require

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
# REDIS_PASSWORD=  # Optional

# MQTT Broker
MQTT_BROKER_HOST=localhost
MQTT_BROKER_PORT=1883  # Dev: 1883 | Prod: 8883 (TLS)
MQTT_USERNAME=
MQTT_PASSWORD=
# MQTT_USE_TLS=false  # Dev: false | Prod: true

# API Gateway
API_GATEWAY_PORT=8080
JWT_SECRET=dev-jwt-secret-NOT-FOR-PRODUCTION  # Prod: use secret manager

# Initial Admin User (created on first startup)
ADMIN_EMAIL=admin@iot.local
ADMIN_PASSWORD=admin
ADMIN_NAME=Admin

# Services (gRPC ports)
DEVICE_MANAGER_PORT=8081
DATA_COLLECTOR_PORT=8082
NOTIFICATION_SERVICE_PORT=8083

# Monitoring
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000

# Environment
ENV=development  # development | staging | production
LOG_LEVEL=debug  # debug | info | warn | error

# ============================================
# Production Security Checklist
# ============================================
#
# ✓ Use secret manager (Vault, AWS Secrets Manager)
# ✓ Enable SSL/TLS everywhere (DB_SSLMODE=require, MQTT TLS)
# ✓ Strong JWT secret (256+ bits, rotate regularly)
# ✓ Minimal DB permissions (no superuser)
# ✓ Network isolation (private subnets, firewall rules)
# ✓ Enable monitoring & alerting
# ============================================
